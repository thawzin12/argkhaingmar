<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Login</title>
    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css"
      rel="stylesheet"
    />
    <style>
      body {
        background: #f8f9fa;
      }
      .login-container {
        min-height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
      }
      .card {
        border-radius: 1rem;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      }
      .input-group-text {
        cursor: pointer;
      }
      .text-danger {
        font-size: 0.875rem;
      }
    </style>
  </head>
  <body class="bg-primary-subtle">
    <div class="login-container">
      <div class="card p-4" style="max-width: 400px; width: 100%">
        <div class="card-header">
          <h2 class="text-center text-info">KhaingMar</h2>
        </div>
        <div class="card-body">
          <h3 class="text-center mb-4">üîê Login</h3>
          <form
            id="login-form"
            method="POST"
            action="/login"
            class="needs-validation"
            novalidate
          >
            <!-- Email Field -->
            <div class="mb-3">
              <label class="form-label">Email</label>
              <input
                type="email"
                name="email"
                class="form-control <%= errors.email ? 'is-invalid' : '' %>"
                placeholder="Enter your email"
                autocomplete="off"
                value="<%= data.email || '' %>"
                required
              />
              <div class="text-danger"><%= errors.email || '' %></div>
            </div>

            <!-- Password Field -->
            <div class="mb-3">
              <label class="form-label">Password</label>
              <div class="input-group">
                <input
                  type="password"
                  id="password"
                  name="password"
                  class="form-control <%= errors.password ? 'is-invalid' : '' %>"
                  placeholder="Enter your password"
                  value="<%= data.password || '' %>"
                  required
                />
                <span class="input-group-text" onclick="togglePassword()">
                  <i class="bi bi-eye-slash" id="toggleIcon"></i>
                </span>
              </div>
              <div class="text-danger"><%= errors.password || '' %></div>
            </div>

            <!-- Remember & Forgot -->
            <div class="d-flex justify-content-between mb-3">
              <div class="form-check">
                <input class="form-check-input" type="checkbox" id="remember" />
                <label class="form-check-label" for="remember"
                  >Remember me</label
                >
              </div>
              <a href="#">Forgot password?</a>
            </div>

            <!-- Submit Button -->
            <div class="d-grid">
              <button type="submit" class="btn btn-primary">Login</button>
            </div>
          </form>
        </div>
      </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script>
      // Password toggle
      function togglePassword() {
        const passwordInput = document.getElementById("password");
        const toggleIcon = document.getElementById("toggleIcon");
        if (passwordInput.type === "password") {
          passwordInput.type = "text";
          toggleIcon.classList.remove("bi-eye-slash");
          toggleIcon.classList.add("bi-eye");
        } else {
          passwordInput.type = "password";
          toggleIcon.classList.remove("bi-eye");
          toggleIcon.classList.add("bi-eye-slash");
        }
      }

      // Bootstrap validation
      (function () {
        "use strict";
        var forms = document.querySelectorAll(".needs-validation");
        Array.prototype.slice.call(forms).forEach(function (form) {
          form.addEventListener(
            "submit",
            function (event) {
              if (!form.checkValidity()) {
                event.preventDefault();
                event.stopPropagation();
              }
              form.classList.add("was-validated");
            },
            false
          );
        });
      })();
    </script>
  </body>
</html>
